.TH "clmask" "1" "30 January 2017" "IPW v2" "IPW User Commands"
.SH NAME
.PP
\fBclmask\fP - make class mask image from an IPW image
.SH SYNOPSIS
.sp
.nf
.ft CR
\fBclmask\fP \fB-c\fP \fIclass\fP [ \fB-i\fP \fIimage\fP ]
.ft R
.fi
.SH DESCRIPTION
.PP
\fBclmask\fP reads an IPW image and creates an output image with all
points but those containing the value \fIclass\fP set to 0.  This can
be used as a mask image for other utilities.  Used in conjunction
with the IPW program classify, a mask can be made that covers many
values.
.SH OPTIONS
.TP
\fB-c\fP \fIclass\fP
Set all pixel values not equal to \fIclass\fP to 0 in the
output image.  All pixels with values equal to \fIclass\fP
will be passed through.
.sp
.TP
\fB-i\fP \fIimage\fP
Use \fIimage\fP as the input image (default: standard input).
.SH OPERANDS
.PP
None
.SH EXAMPLES
.PP
If pixel 58 holds lakes in "state.dem", a mask with just the lakes
can be created with:
.sp
.nf
.ft CR
	clmask  -c 58  -i state.dem   > lakes.mask
.ft R
.fi

.PP
\fBclmask\fP can be used by itself if the image contains a single value
that needs to be masked, or in conjunction with classify.  The
classify program lets you turn whole ranges of pixel values into
"classifications".  This would let you convert all pixel values
between 1 and 50 into one pixel value, then \fBclmask\fP could be run
with that pixel value as it's class, thus creating a mask with
all values outside of 1-50 in the original image set to 0.
.PP
If "class_file" mapped values 1-50 into pixel value 1, the
following would create a mask for all values between 1 and 50
in the file "state.dem":
.sp
.nf
.ft CR
	classify -i class_file state.dem | clmask -c 1 > ground.mask
.ft R
.fi

.PP
The IPW program lutx can be used to invert a mask if so desired.
If the processing was to take place on the above mask for all
pixels outside of 1-50 instead of inside, the following produces
an inverted mask:
.sp
.nf
.ft CR
	mklut | lutx -i ground.mask > water.mask
	0 255
	1 0
.ft R
.fi

.PP
this can also be used to fix the slope of the water pixels to 0:
.sp
.nf
.ft CR
	mux slope ground.mask | bitcom -a -m > slope.fixed
.ft R
.fi
.SH FILES
.PP
None
.SH DIAGNOSTICS
.PP
None
.SH RESTRICTIONS
.PP
None
.SH HISTORY
.TP
May 1990
  Written by Kelly Longley, Oregon State University,
Environmental Protection Agency Laboratory, Corvallis OR
.TP
Jul 1993
  Modified to handle multi-byte images and use an inline awk
script.  Dana Jacobsen, ERL-C.
.TP
Aug 1997
  Converted to IPW Version 2.0, D. Marks, USGS, ERL-C
.SH BUGS
.PP
None
.SH SEE ALSO
.TP
IPW
	\fBbitcom\fP,
\fBclasseq\fP,
\fBclassify\fP,
\fBlutx\fP,
\fBmklut\fP
