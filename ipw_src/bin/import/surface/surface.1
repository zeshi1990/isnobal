.TH "surface" "1" "30 January 2017" "IPW v2" "IPW User Commands"
.SH NAME
.PP
\fBsurface\fP - make IPW image by spatially interpolating irregular point data
.SH SYNOPSIS
.sp
.nf
.ft CR
\fBsurface\fP [ \fB-d\fP ] [ \fB-n\fP \fInpoints\fP ] [ \fB-h\fP \fIheader\fP ] [ \fB-m\fP \fImask\fP ]
      [ \fB-p\fP \fIinfile\fP ]
.ft R
.fi
.SH DESCRIPTION
.PP
\fBsurface\fP reads in an ASCII file of data points and constructs an IPW
image by spatial interpolation using either inverse-distance-squared
or inverse-distance weighting.
.SH OPTIONS
.TP
\fB-d\fP
use inverse-distance weighting for interpolation
(inverse-distance-squared is the default).  This will
produce a smoother interpolated output image because
distant points have proportionally more weight than
in the inverse-distance-squared case.
.sp
.TP
\fB-n\fP \fInpoints\fP
The number of nearest neighbors used for interpolation will
be \fInpoints\fP (default: 12).
.sp
.TP
\fB-h\fP \fIheader\fP
The IPW header file \fIheader\fP (default: standard input) will
be used to determine the number of lines, samples, bits per
pixel (from the "bi" header) and geodetic information (from
the "geo" header).  If \fIheader\fP contains an "lq" header, it
will be used for the floating point mapping in the output
image; otherwise the mapping will be derived from the data.
.sp
.TP
\fB-p\fP \fIinfile\fP
Points will be read in from \fIinfile\fP (default: standard input).
The input file contains three values per line, formatted:
.sp
easting  northing  value
.sp
where the easting and northing are specified in the same
coordinate system as given in the "geo" header.
.PP
At least one of \fB-h and/or \fB-p must be specified.
.TP
\fB-m\fP \fImask\fP
The file \fImask\fP (default: none) will be used to define what
parts of the output \fBsurface\fP are filled in.  Points in \fImask\fP
that are 0 will be left 0 in the output image.
.SH OPERANDS
.PP
	None
.PP
.SH EXAMPLES
.PP
To interpolate a \fBsurface\fP, using 8 nearest neighbors, and
inverse-distance-squared weighting:
.sp
.nf
.ft CR
	surface -n 8 -h hdr.file -p pt.file -m mask >out.image
.ft R
.fi
.SH FILES
.sp
.nf
.ft CR
     None
.ft R
.fi
.SH DIAGNOSTICS
.sp
.TP
error reading point \fInpoint\fP from input file
.sp
.TP
input header has no geodetic header
.br
	The input header file must have a GEO header.
.sp
.TP
input geo units are degrees - must be Euclidean
.br
	The "units" field of the projection defined by the input GEO
	header must be amenable to Euclidean distance calculations:
		d = sqrt((x1-x2)**2  +  (y1-y2)**2)
.SH RESTRICTIONS
.PP
The mask and header file must be single band.
.PP
Map projection distortions can introduce significant error in distance
computations as the spatial extent of the image increases, or if an
improper map projection is used.  For example, interpolating a \fBsurface\fP
over an Arctic region using a standard US Albers projection would
produce unusual (and incorrect) results.
.SH HISTORY
.TP
Jul 1991
	Written by Kelly Longley, Oregon State University,
Environmental Research Laboratory, Corvallis OR
.TP
Aug 1995
	 Cleaned up, and added simple inverse-distance weighting
option, D. Marks, USGS, Environmental Research Lab.,
Corvallis OR
.SH BUGS
.PP
None that we know of
.SH SEE ALSO
.TP
IPW
	\fBmsurfprep\fP,
\fBmsurface\fP,
\fBmkproj\fP,
\fBreproj\fP,
\fBmkgeoh\fP,
\fBmkbih\fP
