.TH "crossval" "1" "30 January 2017" "IPW v2" "IPW User Commands"
.SH NAME
.PP
\fBcrossval\fP - cross validation of interpolation by 'surface' and 'msurface'
.SH SYNOPSIS
.sp
.nf
.ft CR
\fBcrossval\fP [ \fB-p\fP \fIinfile\fP ] [ \fB-c\fP \fItextfile\fP ] [ \fB-n\fP \fIneibs\fP ]
      [ \fB-d\fP \fInodata value\fP ]  [ \fB-h\fP \fIheader\fP ]  [ \fB-m\fP \fImask\fP ]
.ft R
.fi
.SH DESCRIPTION
.PP
\fBcrossval\fP estimates the interpolation error in the
inverse-distance-squared algorithm
used by the
\fBsurface\fP
and
\fBmsurface\fP
programs.
\fBcrossval\fP reads in a text file of data points
(format: easting northing value) and outputs a
text file containing the results of a cross-validation analysis.
For each point in the input file, \fBcrossval\fP ignores that point, and
interpolates an output value using the nearest \fIneibs\fP input points.
.PP
The output file contains the same number of lines as the input
points file, and the following five columns:
.sp
.nf
.ft CR
        easting  northing  value  crossval-value  residual
.ft R
.fi

.PP
Above, "residual" is computed as: value minus crossval-value.
The residuals from a cross-validation can be used to
assess the accuracy of an interpolated surface.  Note,
however, that the cross-validation procedure only assesses
accuracy at locations where measurement stations exist, providing
at best a rough estimate of overall interpolation accuracy.
.PP
NOTE:   Without the \fB-c option, \fBcrossval\fP can be used to
interpolate
an IPW image, exactly like the
\fBsurface\fP
program.  This
functionality was left in mainly for debugging/testing
purposes, but it may be useful since it has the ability
to ignore nodata values, while the
\fBsurface\fP
program does
not.  \fBcrossval\fP's surface interpolation is much slower,
however.
.SH OPTIONS
.TP
\fB-c\fP \fItextfile\fP
Perform a cross-validation and send output to the
file \fItextfile\fP.  \fItextfile\fP contains the following
five columns:  easting, northing, value, crossval-value,
and residual (value minus crossval-value)
.sp
.TP
\fB-n\fP \fIneibs\fP
The number of nearest neighbors used for interpolation will
be \fInpoints\fP (default: 12).
.sp
.TP
\fB-p\fP \fIinfile\fP
Points will be read in from \fIinfile\fP (default: standard input).
The input file contains three values per line, formatted:
.sp
.nf
.ft CR
     easting  northing  value
.ft R
.fi
.sp
.TP
\fB-h\fP \fIheader\fP
Use this option only for conventional image interpolation, NOT for
cross-validation.  The \fB-h\fP and \fB-c options are exclusive.
The IPW header file \fIheader\fP (default: standard input) will
be used to determine the number of lines, samples, bits per
pixel (from the "BI" header) and geodetic information (from
the "GEO" header).  If \fIheader\fP contains an "LQ"
header, it will be used for the floating point mapping in the output
image; otherwise the mapping will be derived from the data.
.PP
At least one of \fB-h\fP and \fB-p must be specified.
.TP
\fB-d\fP \fInodata value\fP
Points with the value \fInodata value\fP (default: -9999) will
be ignored by the interpolation routine.
.sp
.TP
\fB-m\fP \fImask\fP
This option is only valid when using the \fB-h\fP option:
The file \fImask\fP (default: none) will be used to define what
parts of the output surface are filled in.  Points in \fImask\fP
that are 0 will be left 0 in the output image.
.SH OPERANDS
.PP
None.
.SH EXAMPLES
.PP
The following will cross-validate the file Tmin.stations, using
12 neighbors and ignoring values of -9999, to create the output
file Tmin.error:
.sp
.nf
.ft CR
        crossval -p Tmin.stations -j Tmin.error
.ft R
.fi
.SH FILES
.PP
None.
.ft R
.fi
.SH DIAGNOSTICS
.TP
error reading point \fInpoint\fP from input file
.sp
.TP
input header has no geodetic header
The input header file must have a GEO header.
.sp
.TP
input geographic projection units are degrees - must be be Euclidean
The geodetic coordinates defined in the input image must
be appropriate for Euclidean distance calculations:
.sp
.nf
.ft CR
     d = sqrt( (x1-x2)^2 + (y1-y2)^2 )
.ft R
.fi
.SH RESTRICTIONS
.PP
When using the \fB-c option, the input points file may not come
from stdin.
.PP
The mask and header file must be single band.
.PP
Map projection distortions can introduce significant
error in distance computations as the spatial extent of
the image increases, or if an improper map projection is used.
For example, interpolating a surface over an Arctic region while
using a US Albers projection would produce unusual (and incorrect)
results.
.SH HISTORY
.TP
Oct 1994
Written by Rusty Dodson, MERSC, ERL-C.
.SH BUGS
.PP
None.
.SH SEE ALSO
.TP
IPW:
\fBsurface\fP,
\fBmkgeoh\fP
.PP
Dodson 1997
