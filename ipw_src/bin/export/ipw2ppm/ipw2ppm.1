.TH "ipw2ppm" "1" "30 January 2017" "IPW v2" "IPW User Commands"
.SH NAME
.PP
\fBipw2ppm\fP - convert IPW image to Portable Pixel Map (PPM) image
.SH SYNOPSIS
.sp
.nf
.ft CR
\fBipw2ppm\fP [ \fB-v\fP ] [ \fB-b\fP ] [ \fB-m\fP \fImask\fP ] [ \fB-c\fP \fIcolormap\fP ] [ \fB-g\fP ]
      [ \fB-G\fP ] [\fIimage\fP]
.ft R
.fi
.SH DESCRIPTION
.PP
\fBipw2ppm\fP reads an IPW image and outputs a PPM or PGM image suitable
for processing by other image processing or image manipulation
packages.  Since IPW images hold single values per pixel, a colormap
file is used to map the single value into the three-dimensional RGB
color space.  If desired, a 3-band IPW image containing each R, G,
and B color channel can be used to directly create a color image.
.SH OPTIONS
.TP
\fB-v\fP
\fBipw2ppm\fP will print extra information on the standard error.
This includes a description of the input image and a table
showing the color mapping to be used.
.sp
.TP
\fB-b\fP
A colorbar will be added at the bottom of the image.  No
annotation is provided and the bar is of fixed width, but
it can give an idea of the colors used and their mapping.
.sp
.TP
\fB-m\fP \fImask\fP
Use \fImask\fP as a mask image.  Any points in \fImask\fP that are
0 will have the corresponding points in \fIimage\fP set to
special values.  If a 3-band image is used, the special
value is 0,0,0 (black).  If a single-band image is used, the
special value may be set in the colormap file or defaults
to 255,255,255 (white).
.sp
.TP
\fB-c\fP \fIcolormap\fP
Use \fIcolormap\fP as a colormap file.  The format of the file
is described in the FILES section of this manual.  A
colormap file details the mapping of IPW pixel or data
values into RGB colors.
.sp
.TP
\fB-g\fP
A linear graymap is used as the colormap function (described
below in the FILES section) and a PGM image is output.  The
output may be slightly different than that of ipw2pgm.
.sp
.TP
\fB-G\fP
A PGM (Portable Gray Map) image is output.  The values
written will be that of the R (red) channel -- G and B
will be ignored.
.SH OPERANDS
.PP
None.
.SH EXAMPLES
.PP
To convert "900315.ipw" to a PPM image using "col.1k" as a mask and
"temperature.map" as a colormap file:
.sp
.nf
.ft CR
	ipw2ppm -m col.1k  -c temperature.map  900315.ipw
.ft R
.fi

.PP
To print "columbia.ipw" on a color PostScript printer using
"ndvi.map" as a colormap file:
.sp
.nf
.ft CR
	ipw2ppm -c ndvi.map columbia.ipw | pnmtops | lpr -Pcolorps
.ft R
.fi

.PP
To create a false color image from AVHRR images:
.sp
.nf
.ft CR
	mux av.ch2 av.ch1 av.ch1 | ipw2ppm
.ft R
.fi
.SH FILES
.sp
.nf
.ft CR
      A colormap file consists of a lines of the form:
  # <arbitrary text>
     This is a comment line.  Any line with a '#' symbol in the first
     column will be treated as a comment and ignored.
  D <data-value>  <red> <green> <blue>  <fit>
     This is a data line.
     <data-value> is a floating point number or a special value.  Data
     values which are numbers must occur in sorted order with the
     smallest number first.
     Possible special values are:
     	-    The minimum value in the image
     	+    The maximum value in the image
     	+X   The absolute maximum value [max(abs(minv), abs(maxv))]
     	-X   The negative of the absolute maximum value
     	-F   The minimum mapped value
     	+F   The maximum mapped value
     <fit> is the kind of fit that should be used.  This field is optional.
     The default is "lin" which will give a linear fit.  Currently
     there are no other fits.
     If a data value occurs outside of the mapped range and is not
     assigned a pixel, it is mapped to white.
  P <pixel>       <red> <green> <blue>
     This is a pixel line.
     <pixel> is the IPW data value to assign a color to, or the special
     value "M" which is the color of the mask.  If no color is assigned
     to the mask value, it will default to white.
     Pixel lines may occur in any order, even occuring interspersed with
     the Data lines.
     Pixel values are assigned AFTER Data lines, so they override the
     interpolated values given by the Data lines.
  Those are the three different kinds of lines supported.
     <red> <green> and <blue> are RGB values for a color.  They may
     range from 0 to 255.  Black is 0, 0, 0; White is 255, 255, 255.
     White space must seperate the fields. Any number of spaces or
     tabs constitute white space, but not newlines.
     If no colormap file is given, colors are interpolated as follows:
  # maps negative values to blue, positive to red
  D -X    0   0 255
  D  0    0   0   0
  D +X  255   0   0
  # maps mask to white
  P  M  255 255 255
     If graymap is requested with the '-g' option, the program will
     output a PGM (Portable Gray Map) instead of a PPM.  This makes
     the output file 3 times smaller.  Most programs that support PPM
     images will also support PGM and PBM images.  The colormap looks
     like:
  # maps minimum value to black, maximum value to white
  D -    0   0   0
  D +  255 255 255
  # maps mask to white
  P  M  255 255 255
     This is a different colormap than what ipw2pgm uses.  ipw2pgm
     uses a colormap that would have -F and +F instead of - and +.
.ft R
.fi
.SH DIAGNOSTICS
.sp
.TP
image must have 1 or 3 bands.
.br
	The image given must have either 1 band (colormap) or
	3 bands (each band corresponds to an RGB channel).
.sp
.TP
image has over %d bits per pixel.  Please reduce it.
.br
	The image has too many bits to successfully make a color
	map.  The IPW program requantize should be used.
.sp
.TP
ipw2ppm takes only one image.
ipw2ppm currently supports only one image.  mux your images together.
.br
	Only one image can be given as an argument.  If seperate
	IPW images represent the R, G, and B channels, use the IPW
	program mux to join the images together.
.sp
.TP
Colorbars are not supported on 3 band images.
.br
	Colorbars only work on single-band (colormapped) images.
.sp
.TP
Graymap scaling is not supported on 3 band images.
3 band images are always written in PPM format.
.br
	3 band images are used with seperate R, G, and B channels,
	so will automatically generate a color image.  If a
	grayscale image is needed, pipe the output of \fBipw2ppm\fP
	through the PBMPlus program ppmtopgm.
.sp
.TP
3 band images are RGB mapped, not color mapped.
.br
	A 3 band image does not use a colormap file.  The colormap
	file is used to turn a single-band IPW image into color
	through the use of pixel and data value mappings to RGB
	values.  A 3 band image directly maps to RGB.
.sp
.TP
Colormap: \fItype\fP <value> <red> <green> <blue>
.br
	The format of the colormap file is incorrect.  See the
	above FILES section of this manual for a description.
.sp
.TP
Only linear [lin] fits are currently supported.
.br
	Currently no other interpolations are supported between
	data values other than linear.
.sp
.TP
rgb values must be between 0 and 255.
.br
	RGB values are defined for values between 0 (off) and 255
	(on full).  Values inbetween cover the range of intensity
	for that channel.  This is 8 bits per channel, or enough
	for a 24-bit image spanning 16.7 million colors.
.sp
.TP
pixel value \fIpixel\fP out of range.
.br
	The IPW input image does not have enough bits to support
	a pixel value that large.  The maximum value for an 8-bit
	IPW image is 256, 12-bits is 4096, 16-bits is 65536.
.SH RESTRICTIONS
.PP
Takes a lot of memory.  A 512x512 image with mask will take over
2 megabytes.  A 1024x1024 image with no mask will take 4 megabytes.
.PP
Only binary PBM images are output.  No support for ASCII PBM
images is planned.
.SH HISTORY
.TP
Apr 1992
	Written by Dana Jacobsen, ERL-C.
.TP
Mar 1993
	Changed to allow input from stdin at the expense of
memory.  Added 3 band support and +/-F mapping.
Dana Jacobsen, ERL-C.
.TP
Jun 1995
	3-band images seperately quantized.
Dana Jacobsen, ERL-C.
.SH BUGS
.PP
None that we know of
.SH SEE ALSO
.TP
IPW
	\fBipw2pgm\fP,
\fBipw2pbm\fP,
\fBipw2ps\fP,
\fBipw2sun\fP,
\fBipw2hds\fP,
\fBipw2ps\fP,
\fBipw2xim\fP,
	\fBipw2xyz\fP,
\fBpbm2ipw\fP
.TP
Image
	xv, xli, xloadimage, PBM, PPM, pnmtops
.PP
"PBMPLUS -- Extended Portable Bitmap Toolkit", Jef Poskanzer,
10 December, 1991.  Anonymous ftp from export.lcs.mit.edu:
/contrib/pbmplus.tar.Z.
