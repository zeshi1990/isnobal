.TH "gsunweights" "1" "30 January 2017" "IPW v2" "IPW User Commands"
.SH NAME
.PP
\fBgsunweights\fP - Kronrod quadrature weights and sun angles
.SH SYNOPSIS
.sp
.nf
.ft CR
\fBgsunweights\fP \fB-d\fP \fIi\fP,\fIi\fP,\fIi\fP \fB-o\fP \fIout_prefix\fP [ \fB-m\fP \fImask\fP ] [ \fB-q\fP \fInpts\fP ]
      [ \fB-b\fP \fI#bits\fP[,\fI..\fP] ] [\fIgeoh\fP]
.ft R
.fi
.SH DESCRIPTION
.PP
\fBgsunweights\fP is part of a family of large area, or "global",
scale radiation transfer simulation, and solar/terrain geometry calculation
tools, developed after the small-scale radiation transfer and terrain
structure tools, developed at UCSB by Jeff Dozier, Jim Frew,
and Ralph Dubayah.
.PP
All of the global-scale radiation transfer tools, except \fBgsunweights\fP,
are designated by the "g" prefix in front of the small-scale tool's
name.  These tools assume that solar geometry, atmospheric properties,
and sun rise and sun set vary over the grid, and they also correct for
earth curvature when computing horizons, terrain and sky view factors,
and illumantion angles.
.PP
These global-scale radiation and terrain processing tools can be applied
to areas of size, up to the entire earth.  The global-scale radiation
and terrain processing tools were originally developed by Kelly Longley,
Oregon State University, at the Corvallis, Oregon, EPA lab, in the early
1990's.
.PP
\fBgsunweights\fP is basically the global-scale version of the program
sunlight, and should probably be called "gsunlight", but the program gsunlight does
not calculate quadrature weights, because usually integration over large
geographic areas is too time-consuming (in CPU time) to be done.
.PP
\fBgsunweights\fP calculates Kronrod weights and sun angles for numerical
integration of solar radiation over a global-scale image for one day,
currently with either 15 or 21 Kronrod quadrature points.
The input geoh (or image with geoh) must be in lat/lon projection.
\fBgsunweights\fP creates <npts> output images (one for each Kronrod
weight) each with three bands: the Kronrod quadrature weighting factor,
mu (cos zenith angle), followed by the azimuth (degrees).  The
output images are called <out_prefix>.0, ... ,<out_prefix>.<npts-1>.
.SH OPTIONS
.TP
\fB-d\fP \fIi\fP,\fIi\fP,\fIi\fP
date (year, month, day)
.sp
.TP
\fB-o\fP \fIout_prefix\fP
prefix for output image names
.sp
.TP
\fB-m\fP \fImask\fP
mask image
.sp
.TP
\fB-q\fP \fInpts\fP
# quadrature points (default: 15)
.sp
.TP
\fB-b\fP \fI#bits\fP[,\fI..\fP]
# bits in output image (1 or 3 values - one number for
all bands or a number for each band)
.SH OPERANDS
.TP
[\fIgeoh\fP]
	geoh	input geoh containing latitude/longitude projection:
		latitudes are in decimal degrees from -90.0 (S.pole) to 90.0 (N)
		longitudes are in continuous degrees from -180.0 - 180.0 (+E/-W)
		(defaults to stdin)
.sp
.SH EXAMPLES
.PP
To calculate quadrature weights over a 30s dem grid of the US, for
February 15, 1995, given the geoh geoh.us.30s:
.sp
.nf
.ft CR
	gsunweights -d 1995,02,15 -o us.02.15 -m mask.geo.us geoh.us.30s
.ft R
.fi
.SH FILES
.sp
.nf
.ft CR
     None
.ft R
.fi
.SH DIAGNOSTICS
.sp
.TP
None
.SH RESTRICTIONS
.PP
None
.SH HISTORY
.TP
Jul 1990
Written by Kelly Longley, Oregon State University,
Environmental Research Laboratory, Corvallis OR
.TP
Jan 1991
Changed to run from GEO header rather than file of
lat/lon points, by K. Longley, OSU, EPA ERL-C
.TP
May 1991
Added -n nbits option, K. Longley, OSU, EPA, ERL-C
.TP
Jul 1991
Faster version, no longer computes sunrise & set for
each pixel Writes one image at a time; quantizes output
images separately for maximum accuracy,
by K. Longley, OSU, EPA ERL-C
.TP
Oct 1997
Renamed program from sunweights to \fBgsunweights\fP.  J. Domingo, OSU
.SH BUGS
.PP
None.
.SH SEE ALSO
.TP
IPW
	\fBelevrad\fP,
\fBgelevrad\fP,
\fBgsunlight\fP,
\fBgtoporad\fP,
\fBgtoporad.24\fP,
\fBgtopquad\fP,
	\fBtoporad\fP,
\fBselevrad\fP,
\fBsolar\fP,
\fBstoporad\fP,
\fBsunlight\fP,
\fBtoporad\fP,
\fBtopquad\fP
.PP
Marks, D., and J. Dozier, 1979.  "A clear-sky longwave radiation model
	for remote alpine areas", Archiv fur Meteorologie, Geophysik
	und Bioklimatologie, Series B, vol. 27, no. 23, pp. 159-187.
.PP
Dozier, J., 1980.  "A clear-sky spectral solar radiation model for
	snow-covered mountainous terrain".  Water Resources Research,
	vol. 16, pp. 709-718.
.PP
Dozier, J., and J. Frew, 1981.  "Atmospheric corrections to satellite
	radiometric data over rugged terrain".  Remote Sensing of
	Environment, vol. 11, pp. 191-205.
.PP
Dozier, J., J. Bruno, and P. Downey, 1991.  "A faster solution to the
	horizon problem", Computers and Geosciences, volume 7,
	number 2, pp. 145-151.
.PP
Dozier, J., and J. Frew, 1990.  Rapid calculation of terrain parameters
	for radiation modeling from digital elevation data". IEEE
	Transactions on Geoscience and Remote Sensing, vol. 28, no. 5,
	pp. 963-969.
.PP
Dubayah, R., J. Dozier, and F. Davis, 1990.  "Topographic distribution
	of clear-sky radiation over the Konza Prairie, Kansas".  Water
	Resources Research, vol. 26, no. 4, pp. 679-691.
.PP
Marks, D., R. Dubayah, and K. Longley, 1991.  "Modeling the topographic
	and spectral variability of clear-sky solar radiation at regional
	to continental scales.  Proceedings 1991 IGARSS Symposium,
	Remote Sensing:  Global Monitoring for Earth Management, Espoo,
	Finland, Vol. 3, pp. 1711.
.PP
Dubayah, R., and V. Van Katwijk, 1992.  "The topographic distribution
	of annual incoming solar radiation in the Rio Grande basin".
	Geophysical Research Letters, vol. 19, pp. 2231-2234.
.PP
Dubayah, R., 1994.  "Modeling a solar radiation topoclimatology for the
	Rio Grande River Basin".  Journal of Vegetation Science, vol. 5,
	pp. 627-640.
