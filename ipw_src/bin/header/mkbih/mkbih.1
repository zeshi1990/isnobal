.TH "mkbih" "1" "30 January 2017" "IPW v2" "IPW User Commands"
.SH NAME
.PP
\fBmkbih\fP - make a basic image (BI) header
.SH SYNOPSIS
.sp
.nf
.ft CR
\fBmkbih\fP \fB-l\fP \fInlines\fP \fB-s\fP \fInsamps\fP [ \fB-a\fP \fIannot\fP[,\fI...\fP] ] [ \fB-b\fP \fInbands\fP ]
      [ \fB-y\fP \fInbytes\fP[,\fI...\fP] ] [ \fB-i\fP \fInbits\fP[,\fI...\fP] ] [ \fB-f\fP ] [\fIdata\fP]
.ft R
.fi
.SH DESCRIPTION
.PP
\fBmkbih\fP creates an IPW basic image header (BIH) and writes it to
the standard output.  The contents of \fIdata\fP (default: standard
input) are then copied to the standard output.  \fBmkbih\fP therefore
allows an IPW header to be prepended to image data from a
non-IPW source.
.SH OPTIONS
.TP
\fB-l\fP \fInlines\fP
The BIH will indicate \fInlines\fP lines per image.
.sp
.TP
\fB-s\fP \fInsamps\fP
The BIH will indicate \fInsamps\fP samples per image line.
.sp
.TP
\fB-b\fP \fInbands\fP
The BIH will indicate \fInbands\fP bands per image sample
(default: 1).
.sp
.TP
\fB-y\fP \fInbytes\fP[,\fI...\fP]
The BIH will indicate \fInbytes\fP bytes per pixel (default:
1, or the minimum necessary to accommodate the
\fInbits\fP specified by the \fB-i\fP option).
.sp
.TP
\fB-i\fP \fInbits\fP[,\fI...\fP]
The BIH will indicate \fInbits\fP bits per pixel (default:
8, or all bits in the \fInbytes\fP specified by the \fB-y\fP option).
.PP
\fB-y\fP and \fB-i may have either 1 or \fInbands\fP arguments.
If there is 1 argument and \fInbands\fP is greater than 1, then the argument
applies to all bands.
.TP
\fB-a\fP \fIannot\fP[,\fI...\fP]
The BIH will indicate \fIannot\fP as the annotation (commentary)
for each band (default: no annotation).  If \fInbands\fP is
greater than 1 and \fB-a is specified, then it must have
exactly \fInbands\fP arguments.
.sp
.TP
\fB-f\fP
Force header output only.  Do not attempt to copy \fIdata\fP
to the standard output.  This allows creation of a
standalone header to which image data may later be
appended, or which may be passed as control information to
another IPW program such as \fBlqhx\fP.
.SH OPERANDS
.TP
[\fIdata\fP]
non-IPW image data
.SH EXAMPLES
.PP
To make a stand-alone header for a single-band 512x512x8-bit image:
.sp
.nf
.ft CR
	mkbih -l 512 -s 512 -f >header
.ft R
.fi

.PP
To prepend an IPW basic image header (BIH) to a 512 line by 512
sample single-band image with 8-bit pixels:
.sp
.nf
.ft CR
	mkbih -l 512 -s 512 image
.ft R
.fi

.PP
To append a header to a raw image being read by dd:
.sp
.nf
.ft CR
	dd ... | mkbih -l 512 -s 512 >image
.ft R
.fi

.PP
To prepend an IPW basic image header (BIH) to a 6000 line by 7000 sample
single-band 8-bit image being read directly from tape:
.sp
.nf
.ft CR
	mkbih -l 6000 -s 7000 -f  >image
	dd bs=7000  <{tape-device}  >>image
.ft R
.fi

.PP
Note the use of ">>" to append the image data to the file
containing the standalone header.
.SH FILES
.PP
None.
.SH DIAGNOSTICS
.TP
\fInbits\fP won't fit in \fInbytes\fP bytes
Only the following combinations of \fInbytes\fP and \fInbits\fP
are allowed:
.sp
.nf
.ft CR
     nbytes        nbits
     1, 2, 4        1 ..  8
        2, 4        9 .. 16
           4       17 .. 32
.ft R
.fi
.sp
.TP
input file not allowed with "\fB-f" option
Since the \fB-f option produces an "orphan" BIH header, there
is need for an input file.
.sp
.TP
may specify either 1 or \fInbands\fP values for nbytes
.TP
may specify either 1 or \fInbands\fP values for nbits
The number of bytes and bits specified by the \fB-y and \fB-i
options must be either 1 or the same as the number of bands.
.sp
.TP
\fInbands\fP bands requires \fInbands\fP annotation strings
The number of annotation strings specified by the \fB-a option
must be the same as the number of bands.
.SH RESTRICTIONS
.PP
None.
.SH HISTORY
.TP
Jul 1990
Written by James Frew, UCSB.
.sp
.TP
Apr 1991
Don't repeat band 0 header if multiple annotation strings
are given.  Kelly Longley, ERL-C.
.SH BUGS
.PP
The annotation string may not contain any commas (they will be
interpreted by \fBmkbih\fP as option-argument separators, even if quoted).
.PP
Using \fB-i for the number of output bits is non-standard; most
IPW programs use \fB-n\fP.
.SH SEE ALSO
.TP
IPW:
\fBlqhx\fP,
\fBprhdr\fP,
\fBrmhdr\fP,
\fBmkgeoh\fP,
\fBmklqh\fP,
\fBmksath\fP,
\fBmk*h\fP
.sp
.TP
UNIX:
dd
.PP
Frew 1990
.br
